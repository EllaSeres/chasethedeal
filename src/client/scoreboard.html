<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="style.css">
	
</head>
<body>
	<div id="container" >
		
			<img id="title" alt="Chase the deal" src="title.svg" />
  <table style="width:100%">
  <tr>
    <th>Username</th>
    <th>Cop</th>
    <th>Dealer</th>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>1</td>
  </tr>
</table>
</div>

<script type="module">
  import { playAudio } from './sound.js';
  import { scoreboard } from './auth.js';

  async function loadScoreboard() {
      const el = document.querySelector('table');
      el.innerHTML = '<tr><td>Username</td><td>Runner</td><td>Chaser</td></tr>';

      const rows = await scoreboard();

      for(let row of rows) {
          el.innerHTML += `<tr>
          <td>${row.username}</td>
          <td>${row.winsRunner}</td>
          <td>${row.winsChaser}</td>
      </tr>`;
      }
  }

  const q = new URLSearchParams(location.search);
  const status = q.get("status");

  if(status == 'You win') {
    alert('You win!');
  } else if(status == 'You lose') {
    alert('You lose!');
  }

  loadScoreboard();
</script>

</body>
</html>